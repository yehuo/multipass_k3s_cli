

# Common settings for all VMs
global:
  base_image: "22.04"
  # Resource settings: cpu, memory, disk
  resources:
    cpus: 2
    memory: "2G"
    disk: "10G"
  # Network settings: bridged or NAT, extra interfaces
  network:
    bridged: false
    extra_interfaces: []
  # Storage settings: mounts from host to guest
  mounts:
    - source: "/path/on/host"
      target: "/path/on/guest"

# Universal node configuration - these settings apply to all nodes by default
# Individual node configurations can override these settings
node_defaults:
  # Basic node identification
  type: "worker"
  description: "K3s node"
  
  # Resource defaults (can be overridden per node)
  resources:
    cpus: 2
    memory: "2G"
    disk: "10G"
  
  # Network defaults
  network:
    bridged: false
    extra_interfaces: []
  
  # Storage defaults
  mounts: []
  
  # Image and cloud-init defaults
  image: "22.04"
  cloud_init: null

# Virtual machine definitions, overriding global settings as needed
inventory:
  - k3s-main-01: "nodes/k3s-main-01.yaml"
  - k3s-worker-01: "nodes/k3s-worker-01.yaml"
  - k3s-worker-02: "nodes/k3s-worker-02.yaml"

# OS settings
os:
  ssh:
    public_key_path: "~/.ssh/id_rsa.pub"
    generate_if_missing: true
  k3s:
    k3s_version: "v1.28.4+k3s1"
    k3s_install_options: ""
    kubeconfig_path: "~/.kube/config"
  hosts_file_update: true  # Update /etc/hosts on host machine
  common_packages:
    - "docker.io"
    - "docker-compose"
    - "htop"
    - "net-tools"
    - "curl"
    - "wget"
    - "git"
    - "vim"
  post_creation_scripts:
    - "scripts/setup-common.sh"
    - "scripts/setup-docker-proxy.sh"

# Backup and snapshot settings
backup:
  enable_snapshots: true  # Enable automatic snapshots
  retention_days: 7       # Snapshot retention policy
  schedule: "0 2 * * *"   # Snapshot schedule (cron format): daily at 2 AM
